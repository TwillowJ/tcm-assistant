# 🌿 中医智能小助手

一个基于AI的中医养生咨询应用，采用多轮对话形式，提供个性化的中医辨证分析和养生建议。

## ✨ 核心特性

- 🤖 **AI智能分析**：基于 OpenAI GPT-4o-mini 模型，提供专业的中医辨证分析
- 💬 **多轮对话**：支持连续对话，AI可以主动询问细节，提供更精准的建议
- ⚡ **流式输出**：AI回复实时流式显示，打字机效果，提升用户体验
- 🎯 **精准辨证**：从中医角度分析证型（气虚、血虚、阴虚、阳虚、气滞、血瘀等）
- 💊 **实用养生建议**：饮食调理、生活起居、运动养生、穴位保健等全方位指导
- 🔒 **隐私保护**：个人信息完全可选，未提供的信息不会被AI假设
- 🎨 **精美界面**：渐变卡片设计，按钮悬停动画，现代化UI

## 🚀 在线演示

**部署链接**：https://tcm-assistant-faqih5eesu2aadpazfgnfg.streamlit.app/

## 📱 功能展示

### 欢迎页面
- 渐变色标题设计
- 卡片式功能展示（AI智能分析、精准辨证、养生建议、隐私保护）
- 简洁的免责声明
- 一键进入问诊

### 对话界面
- **固定高度聊天容器**：500px高度，内部可滚动，避免页面过长
- **智能欢迎语**：首次进入显示AI助手的自我介绍
- **快速症状选择**：6个常见症状按钮（2列布局，移动端友好）
  - 😴 疲劳乏力、精神不振
  - 🌙 失眠多梦、睡眠质量差
  - 🍽️ 消化不良、胃胀腹胀
  - 🤕 头痛头晕
  - 😰 焦虑心烦、情绪低落
  - 🦴 腰酸背痛、关节疼痛
- **个人信息（可选）**：
  - 年龄：下拉选择1-120岁或"未提供"
  - 性别：不方便透露/男/女
  - 提示：*提供个人信息可获得更精准的养生建议*
- **实时流式回复**：
  - 发送消息后立即显示在聊天框
  - 显示"正在分析中..."状态
  - AI回复在聊天框内逐字流式显示，带光标效果 ▌
- **对话管理**：
  - 返回首页（有对话时需确认）
  - 新对话（清空历史重新开始）

### AI分析内容结构
当用户描述症状后，AI会提供：

**中医辨证分析：**
1. 证型判断及依据
2. 病机解释（通俗易懂）
3. 个体因素分析（考虑年龄、性别影响）

**养生建议：**
1. **饮食调理**：推荐食物5-8种、食疗方2-3个、避免食物、饮食习惯
2. **生活起居**：作息建议、睡眠改善3-5个方法、情绪调节、日常注意
3. **运动养生**：推荐运动3-5种、运动方案（频率/时长/强度）、传统功法、运动禁忌
4. **其他调理**：穴位保健3-5个、外治方法、季节调养、日常小妙招

**重要提醒：**
1. 就医建议（哪些症状需及时就医）
2. 调理周期（预期多久见效）
3. 注意事项（基础疾病/服药提醒）
4. 跟踪评估方法

## 🛠️ 技术栈

- **前端框架**：Streamlit 1.40+
- **AI模型**：OpenAI GPT-4o-mini
- **编程语言**：Python 3.8+
- **部署平台**：Streamlit Community Cloud
- **样式设计**：自定义CSS（渐变背景、悬停动画、圆角优化）

## 📦 项目结构

```
medical/
├── app.py                          # Streamlit主应用（多轮对话界面）
├── llm_service.py                  # LLM服务（OpenAI API封装）
├── requirements.txt                # Python依赖包
├── .env                           # 环境变量（本地开发）
├── .gitignore                     # Git忽略配置
└── README.md                      # 项目文档
```

## 🔧 本地开发

### 前置要求
- Python 3.8+
- OpenAI API Key

### 快速开始

1. **克隆仓库**
```bash
git clone https://github.com/TwillowJ/tcm-assistant.git
cd tcm-assistant
```

2. **安装依赖**
```bash
pip install -r requirements.txt
```

3. **配置API密钥**

创建 `.env` 文件：
```bash
echo "OPENAI_API_KEY=your_api_key_here" > .env
```

4. **运行应用**
```bash
streamlit run app.py
```

应用将在 `http://localhost:8501` 自动打开。

## 🌐 部署到Streamlit Cloud

### 部署步骤

1. **推送代码到GitHub**
```bash
git add .
git commit -m "你的提交信息"
git push
```

2. **访问 Streamlit Cloud**
   - 登录 [share.streamlit.io](https://share.streamlit.io)
   - 点击 "New app"

3. **配置应用**
   - Repository: 选择你的GitHub仓库
   - Branch: main
   - Main file path: `app.py`

4. **添加Secrets**
   在Streamlit Cloud的应用设置中，添加：
```toml
OPENAI_API_KEY = "your_openai_api_key_here"
```

5. **部署完成**
   - 等待1-2分钟自动部署
   - 获得公开访问链接

### 自动更新
推送代码到GitHub后，Streamlit Cloud会自动检测并重新部署：
```bash
git add .
git commit -m "更新说明"
git push
```

## 📝 使用说明

### 基本流程
1. 访问应用网址
2. 点击"🩺 开始问诊"进入对话
3. 可选：展开"个人信息"填写年龄和性别
4. 描述症状（可选快速选择或手动输入）
5. AI实时流式返回分析和建议
6. 可继续追问或询问更多细节

### 示例对话

**用户**：最近经常感到疲劳乏力，下午特别明显，晚上睡眠质量也不好

**AI**：理解您的情况。为了更准确地分析，我想了解几个细节：
1. 这种疲劳感持续多久了？
2. 是否伴有其他症状，比如食欲、消化方面的问题？

**用户**：持续大约两周了，胃口一般，有时会腹胀

**AI**：[提供完整的中医辨证分析和养生建议]
- 证型判断：脾气虚弱...
- 饮食调理：山药、小米、红枣...
- 生活起居：...
- 运动养生：...
- [更多详细建议]

### 隐私保护说明
- **个人信息完全可选**：不填写也能获得建议
- **未提供的信息不会被假设**：选择"未提供"年龄时，AI不会假设具体年龄
- **对话不会永久存储**：刷新页面后对话清空
- **仅本地session保存**：数据仅在当前会话中存在

## ⚠️ 免责声明

**本应用仅为 AI 技术演示，内容仅供参考，不能替代专业医疗诊断。**

- 本应用基于AI大语言模型，可能存在不准确或不完整之处
- 建议仅为养生保健参考，不涉及具体诊断和药物治疗
- 如有严重、持续或恶化的症状，请及时就医
- 如有基础疾病或正在服药，请咨询专业医师后再采纳建议

## 📊 版本历史

### v1.6.3 (2025-10-19) - 当前版本
- 🔧 **重要修复**：修复年龄信息传递问题，未提供年龄时AI不再假设默认值
- ✨ 优化个人信息输入方式，年龄改为下拉选择框
- 🎨 UI/UX优化：渐变标题、卡片式布局、按钮悬停动画

### v1.6.2 (2025-10-19)
- 🎨 优化个人信息输入方式，移除复选框，简化操作流程
- ✨ 年龄输入改为下拉选择框，与性别框样式一致

### v1.6.1 (2025-10-19)
- 🔧 修复个人信息默认值问题，添加"提供年龄信息"复选框

### v1.6 (2025-10-18)
- ✨ 流式输出优化：AI回复在聊天框内实时显示
- 🎨 欢迎页面：渐变色标题、卡片式功能展示
- 📱 响应式优化：快速症状选择改为2列布局
- 🎭 添加打字机效果和光标动画

### v1.5 (2025-10-18)
- 💬 实现多轮对话功能
- ⚡ 即时消息显示 + "正在分析中..."状态
- 📝 增强AI prompt，提供更详细的养生建议

### v1.0.0 (2025-10-17)
- 🎉 初始版本发布
- 🤖 集成OpenAI GPT-4o-mini模型
- 💊 实现中医辨证分析和养生建议
- 🚀 部署到Streamlit Community Cloud

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request！

### 开发方向建议
- 🎯 优化Prompt工程，提升分析准确性
- 📚 添加中医养生知识库
- 🌍 支持多语言（英文、繁体中文等）
- 📊 添加用户反馈和评分机制
- 🔍 实现症状搜索和历史记录
- 🎨 移动端UI优化

### 提交规范
```bash
# 功能开发
git commit -m "feat: 添加XXX功能"

# Bug修复
git commit -m "fix: 修复XXX问题"

# UI优化
git commit -m "style: 优化XXX界面"

# 文档更新
git commit -m "docs: 更新XXX文档"
```

## 📄 开源协议

本项目采用 MIT 协议开源，详见 [LICENSE](LICENSE) 文件。

## 🙏 致谢

- [Streamlit](https://streamlit.io/) - 优秀的Python Web应用框架
- [OpenAI](https://openai.com/) - 强大的GPT模型支持
- [Claude Code](https://claude.com/claude-code) - AI辅助开发工具
- 传统中医理论 - 为本应用提供理论基础

## 📧 联系方式

- **GitHub Issues**: [提交问题或建议](https://github.com/TwillowJ/tcm-assistant/issues)
- **项目仓库**: https://github.com/TwillowJ/tcm-assistant

---

**⭐ 如果这个项目对你有帮助，欢迎给个 Star！**

*本项目由 Claude Code 辅助开发完成*